---
- hosts: localhost
  connection: local
  gather_facts: no
  tasks:
    - name: Create a resource group for VMs
      azure_rm_resourcegroup:
        name: vms
        location: westeurope
    - name: Create vms with apps
      azure_rm_deployment:
        state: present
        resource_group_name: vms
        location: westeurope
        template_link: 'https://raw.githubusercontent.com/mdobrzyn/awx-demo-azure_rm_deployment/master/3-create-windows/azuredeploy.json'
        parameters_link: 'https://raw.githubusercontent.com/mdobrzyn/awx-demo-azure_rm_deployment/master/3-create-windows/azuredeploy.parameters.json'
        # parameters:
        #   virtualMachineAdminUserName:
        #     value: vmadmin
        #   virtualMachineAdminPassword:
        #     value: P@ssw0rd1012
        #   virtualMachineNamePrefix:
        #     value: weu
        #   virtualMachineCount:
        #     value: 5



